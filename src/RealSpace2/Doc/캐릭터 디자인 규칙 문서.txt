//////////// 캐릭터 작업시 주의사항 /////////////////

A. 에니메이션 작업시

	1. 모델링이 마무리 된 모델들은 physique 적용전에 Utilities 에 있는 Reset XForm 을 해준다.
	
	2. 적용후 Attach to Node 에서 Blending Between Links 항목의  NLinks 로 되어 있는 것을
		4Links 로 변경한다. ( 3Links 나 2Links 를 선택 하실 수 있다면 속도에 더 유리. )
		
	3. 가급적 에니메이션 시작 프레임은 0 부터 시작한다. ( 수정 )
	
	4. 더미나 본 오브젝트 에니에이션은 캐릭터 엔진 완성시까지 사용 금지. ( 수정 )
	
	5. 바이패드나 본의 기본이름 변경하지 말기. (ex. Bip 로 시작~ Bone 로 시작~)

	6. 버택스 에니메이션 사용 안하기. ( 나중에 장착 가능한 형태로 부분 지원. )

	7. 일반 키 프레임 에니메이션 사용시 ( 바이패드 없는것 )
		mirror 사용과 pivot 이동시 에니메이션 적용전에 Reset Xform 해주기
		( Reset Xform 적용한후 pivot 을 이동하면 Reset Xform 의 의미가 없어짐 )
	
	에니메이션 파일 관리
		
	상태별 에니메이션 ( 종족(직업) X 성별 X 상태 )
		idle
		move 
		attack
		sp attack 1 ~ x 등
	
	[ 에니메이션 파일 이름규칙 ]
	
	무기 더미가 에니메이션을 가질수도 있다.
	들고 있는 무기의 종류에 따라서 에니메이션이 틀려진다.
	
	ex > 
		case 1. 상태별 idle 1,2,3,4 random 선택~
		case 2. 인간족 남자가 왼손에 칼을 들고 attack 하는경우
		
				X ( 종족과 성별은 xml 에서 묶어줌.. )
				
				X 왼손에 칼을 든경우 (오른손,왼손,양손)
				  왼손에 총을 든경우 (오른손,왼손,양손)
	
	
B. 장비와 장비 위치 더미 오브젝트 작업시

	1. 종류
	
		더미형 장비 			: 더미 오브젝트를 사용하고
		기본모델 바꾸기형 장비 	: 모델에서 각각의 잘라진 mesh

	2. 이름규칙
	
		시작 이름은 equip_ or eq_ 로 내정 : 각부위별 이름 규칙
		지정된 이름은 소문자만 사용한다.
		이름은 기획서의 명칭을 따른다.
		
		머리장비 : 머리카락이나 모자  	: eq_head
		얼굴장비 : 얼굴					: eq_face
		가슴장비 : 갑옷		    		: eq_chest
		손목장비 : 장갑					: eq_hands
		다리장비 : 바지나 다리갑옷		: eq_legs
		발  장비 : 신발류				: eq_feet
		
		+ 고유한 이름
		
		ex >
			신발 아이템 이름이 test1 이라면
			
			파츠 모델에는 >>  eq_feet_test1 << 이라고 적는다. 
			
			eq_feet 는 종류를 나타내고
			
			_test1 은 고유한 이름을 나타낸다..
		
		더미
		
		// 한손 장비는 왼손 오른손 관계없이 장비가능 + 그에 따른 에니메이션..
		
		// 더미 모델은 왼손과 오른손의 구분도 있어야함. ( 보이지 않는 가상의 무기 모델 )
		// 더미로 인식한다.. figure 모델에는 모두 붙어 있어야 한다.
		
		왼손  장비 : 왼손   무기용 더미	: eq_wl ( weapon_left )
		오른손장비 : 오른손 무기용 더미	: eq_wr ( weapon_right )
		
		// 실재 무기 모델은 한손장비 양손장비 표시 (장비가능한 보여지는 무기 모델
		
		한손 장비 : single				: eq_ws ( weapon_single )
		양손 장비 : double				: eq_wd ( weapon_double )
		
		
		+ 장비품의 종류에따라 필요에 따른 추가 ( 디자이너분들 작업시 필요에 따라 추가 )
		
		ex >	sword , gun , bow 등등..
		
										: eq_ws_sword
										: eq_ws_gun
										: eq_ws_bow
	
		+ 장비품의 고유 이름
		
		ex >
				
			무기 이름이 test2 고 한손 칼이라면
			
										: eq_ws_sword_test2
				
		// 프로그래머가 알아야 할 정보..
		
		더미인가 모델인가?
		왼손인가 오른손인가?
		한손인가 양손인가?		
		모델의 고유한 이름은?
		
	3. 디자인시
	
		더미는 어떤 모양이든 관계없음. 프로그램 내부에서는 pivot 과 에니메이션 정보만 사용.
		( 모델의 초기 방향치 값은 중요 x ,y ,z 한 축을 방향으로한 더미를 링크 )
		더미 생성시 방향이 무기의 방향값 
		( 더미가 z 축이 위였다면 무기들도 z 축이 위가 되는 방향)
		캐릭터 뷰어에서 장비품 장비 시켜볼 수 있는 기능 지원함.
		
	4. 무기의 에니메이션
		더미를 에니메이션 시킴.. 각상태별 에니메이션 정보에 포함

	5. 모델 교환 장비 ( 가슴갑옷 장비등 )
		Physique 의 Envelope 가 적용된 모델이어야 함.
		
	6. 텍스쳐 교환 장비
		예쁘게 그리기.. ^^

	7. 무기의 궤적에 대한 더미 오브젝트 ( 보류 )

C. 정렬( align ) 오브젝트의 사용 

	1. 무기 effect 등에 사용.
	2. 이름규칙. -> 예전것 복사
	
	* object의 이름이 algn0로 시작하면 피벗의 -y 방향을 카메라방향으로 맞춤
	* object의 이름이 algn1로 시작하면 피벗의 z 방향을 축으로 회전하면서 -y 방향을 카메라방향으로 맞춤.

D. 캐릭터 묶음정보 기술

	1. 기본적으로 xml 을 사용. < 정리 >
		
		


/////////////////////////////////////////////////////////////////

부연설명 & 기타사항

모델링 관점과 에니메이션 관점으로

	1. 모델의 조합 

		 스키닝이 지원되는 모델과 아닌 모델 
		 
		 ex) 몸통 갑옷 <-> 무기류
		 
		 보통의 경우 스키닝이 지원 되어야 할 모델들은 항상 있어야하는 모델
	 
	2. 에니메이션의 조합

		상태별 에니메이션간 보간 : 프로그래밍으로 지원 고려

캐릭터 링크에 대한 정보 -> xml : load , save

	texture 장비 교환 정보 
	무기 파일별 장비 위치 정보 
	..... 필요정보 정의.. 기술..

Tool 은 맥스 플러그인과 장비 시켜 볼수있는 캐릭터 뷰어 지원..

[[[[ 결과적 출력물 ]]]]

	캐릭터 기본 모델 정보 파일 ( 장착더미 포함 )
	상태별 에니메이션 파일 ( 장착더미 에니메이션 포함 )
	파츠 교환용 모델들 ( physique 의 envelope 적용된것 )


//////////////////////////////////////////////////////////////////////
[ 고려사항 ]

만약 구조가 수정이 될 경우 디자인 작업이 많은 일이 필요해지는 경우는?
effect 와 item 처리시에 예외적인 추가 사항은?


// SetAnimation 시..
// 현재 에니메이션이 방해받을수 없는 속성이라면 SetNextAnimation 으로 등록..코드수정

[ type0 ]

	각 상태별로 파생될 수 있는 에니메이션 파일과의 관계 생각해보기...
	( 클라이언트 쪽만 사용됨 )

	< 한가지 상태에 여러가지 에니메이션 파일이 있는경우 >

	[ 상태와 파일 ]

	[ 상위에서는 상태로만 연결 ]

	attack
	run
	idle
	die


1. idle 등과 같이 random 으로 선택될수있는 상태 idle 상태에 ( idle(1) ~ idle(n) ) 까지
	[ 랜덤하게 선택 연결]

2. 직접 무기 공격의 종류 (특수공격제외)
	"attack" 라면 하부에서 
		[ 현재 장비 상태에 따라 에니메이션 선택.. ]
			한손무기 칼을 왼손에 들고있다....라면..
				한손무기 왼손 칼 에니메이션 연결... ( 고정된 이름으로 연결 )

		ex> attack_weapon_single_left

3. 마법공격의 경우..
	에니메이션 파일의 종류는?

	1. 마법 준비 과정 ( 특별한 종류의 마법마다 다른 모션인가? )
	2. 마법 사용

4. 마법이든 공격이든 특수한 처리의 경우

	상태 이름 자체가 틀린경우 -> 이경우 서버에서의 명령 자체가 특수한 명령으로 날라옴??
	
	( 공격 : 공격종류 ( 공격 종류에 따른 모션파일 연결 )

[ type1 ] [ 중간에 끊어질수 있는 타잎과 아닌타잎 ( 시작하면 끝을 봐야하는 ) ]

	( 서버도 알고있어야 하는가? ) 서버 자체가 명령을 내리는것이 잘못된것임..

1. 중간에 에니메이션이 끊어지고 다른 에니메이션으로 바뀔수있는 상태 ( 상태인가 파일인가? )

	ex> 공격명령1 : 공격 에니메이션 하다가 뛰라고 명령 오는 경우 바로 취소 될 수 있는가? ( 원하는 프레임으로 바로 전이 )

2. 무슨일이 있어도 하던건 마쳐야 하는 상태 (파일)

	ex> 특수마법공격1 : 한번 발동되면 막을수 없는 마법.. 사용자가 뛰라고 명령해도 하던걸 해야함.. 


[ type2 ]
	
	반복과 에니메이션을 마치고 나서의 상태
	( 클라이언트 파트만 )

1. once (begin frame 유지)							-> 어디다?
2. once_last ( end frame 유지 )						-> die : 죽었을 경우
3. once_idle ( 한번하고 idle 로 돌아감) , loop , )	-> attack 의 경우 한번공격하고 idle
													-> 특정 상태 변경이 내려진경우 바로 변경
														( 공격중에 도망가라( run ) 내려진경우
4. loop												-> run,walk 등은 상위에서 바꿔줄때까지
 

ex>
	idle	-> random file select
	walk	-> loop
	run		-> loop
	attack	-> once
	die		-> once + last frame ( 마지막 프레임 유지 ) ( 움직이지 않는 )
	dying	-> died(dead) loop : 죽어넘어지는 + 죽어서 흔들리는.. 
					( 자동 상태 전이(보여지기만 하는것이니) -> 서버값을 기다릴 필요도 없고 )

	종족마다 직업마다 다를수있다는점...
	서버에서 날려주는건 죽었다. last frame 을 유지할것인가? 죽은에니메이션으로 넘어갈것인가?

	캐릭터마다 똑같이 죽어도 지금 모델에 따라서 틀리다..


에니메이션간 보간에 관한연구.. ( 상태가 바뀌는경우 )
	장점: 다소나마 에니메이션이 튀어보이는것을 막는다.
	단점: 느려진다.


1. 모션 블랜딩 ( max 의 motion flow 기능 ) ( 어렵다,느리다 -.- )
2. 하던 모션의 처음 프레임 값과의 지금 프레임값을 특정시간에 (1-2초) 선형보간하여 보여준다. (한 모션 안에서 ) ( 시작 프레임으로 거꾸로 돌아가서 시작하는것 )
3. 이번 모션과 다음 상태모션의 시작프레임을 특정시간에 (1-2초) 선형보간하여 보여준다. ( 서로 다른 모션간) ( 무지하게 어색해질 수 있다 ).
4. 디자이너가 각각의 상황마다 중간과정의 보간 에니메이션을 만든다.. (제약이 심해진다.) (불가능하다.)


그밖의 상황에 대한 연구..

